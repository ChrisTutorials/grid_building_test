[gd_scene load_steps=11 format=3 uid="uid://cdrtd538vrmun"]

[ext_resource type="Script" uid="uid://dnl6gv8yc3how" path="res://addons/grid_building/systems/grid_targeting/grid_targeting_system.gd" id="1_1gfv7"]
[ext_resource type="Script" uid="uid://b2lgu2pxu4x1d" path="res://test/grid_building_test/scenes/env/collision_test_environment.gd" id="1_bi4n4"]
[ext_resource type="Script" uid="uid://ckwhivepsvl0n" path="res://addons/grid_building/components/gb_level_context.gd" id="2_bi4n4"]
[ext_resource type="Script" uid="uid://cg7xwag2jbf8k" path="res://test/grid_building_test/utilities/injection/gb_test_injector_system.gd" id="2_i48kh"]
[ext_resource type="Script" uid="uid://dasmm18l8fxdo" path="res://addons/grid_building/user/gb_owner.gd" id="6_i48kh"]
[ext_resource type="Resource" uid="uid://dy6e5p5d6ax6n" path="res://test/grid_building_test/resources/composition_containers/test_composition_container.tres" id="6_vp3to"]
[ext_resource type="PackedScene" uid="uid://dsaumst3yyp21" path="res://test/grid_building_test/scenes/tile_map/TEST_buildable_31x31_tile_map.tscn" id="6_wdpwq"]
[ext_resource type="Script" uid="uid://ow5wabt5g4dc" path="res://addons/grid_building/placement/manager/indicator_manager.gd" id="8_indicator"]
[ext_resource type="PackedScene" uid="uid://c5b5rr0g7nh51" path="res://test/grid_building_test/scenes/grid_positioner/grid_positioner_stack.tscn" id="9_ckctr"]
[ext_resource type="Script" uid="uid://t7usxjx3kyoo" path="res://addons/grid_building/ui/target_informer/target_informer.gd" id="10_ckctr"]

[node name="CollisionTestEnvironment" type="Node" node_paths=PackedStringArray("indicator_manager", "target_informer", "injector", "grid_targeting_system", "positioner", "targeter", "world", "level", "level_context", "tile_map_layer", "objects_parent", "placer")]
script = ExtResource("1_bi4n4")
indicator_manager = NodePath("World/Level/IndicatorManager")
target_informer = NodePath("TargetInformer")
injector = NodePath("GBInjectorSystem")
grid_targeting_system = NodePath("GridTargetingSystem")
positioner = NodePath("World/GridPositioner2D")
targeter = NodePath("World/GridPositioner2D/TargetingShapeCast2D")
world = NodePath("World")
level = NodePath("World/Level")
level_context = NodePath("World/Level/GBLevelContext")
tile_map_layer = NodePath("World/Level/TileMapLayer_31x31_Buildable")
objects_parent = NodePath("World/Level/PlacedObjectsParent")
placer = NodePath("World/Level/Placer")

[node name="GBInjectorSystem" type="Node" parent="."]
script = ExtResource("2_i48kh")
composition_container = ExtResource("6_vp3to")
metadata/_custom_type_script = "uid://dil41nh8d4c3k"

[node name="GridTargetingSystem" type="Node" parent="."]
script = ExtResource("1_1gfv7")
metadata/_custom_type_script = "uid://dnl6gv8yc3how"

[node name="World" type="Node2D" parent="."]

[node name="Level" type="Node2D" parent="World"]

[node name="GBLevelContext" type="Node" parent="World/Level" node_paths=PackedStringArray("target_map", "maps", "objects_parent")]
script = ExtResource("2_bi4n4")
target_map = NodePath("../TileMapLayer_31x31_Buildable")
maps = [NodePath("../TileMapLayer_31x31_Buildable")]
objects_parent = NodePath("../PlacedObjectsParent")
metadata/_custom_type_script = "uid://ckwhivepsvl0n"

[node name="PlacedObjectsParent" type="Node2D" parent="World/Level"]

[node name="Placer" type="Node2D" parent="World/Level"]

[node name="GBOwner" type="Node" parent="World/Level/Placer" node_paths=PackedStringArray("owner_root")]
script = ExtResource("6_i48kh")
owner_root = NodePath("..")
metadata/_custom_type_script = "uid://dasmm18l8fxdo"

[node name="TileMapLayer_31x31_Buildable" parent="World/Level" instance=ExtResource("6_wdpwq")]

[node name="IndicatorManager" type="Node2D" parent="World/Level"]
script = ExtResource("8_indicator")
metadata/_custom_type_script = "uid://ow5wabt5g4dc"

[node name="GridPositioner2D" parent="World" instance=ExtResource("9_ckctr")]

[node name="Camera2D" type="Camera2D" parent="."]

[node name="TargetInformer" type="Control" parent="." node_paths=PackedStringArray("info_parent")]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("10_ckctr")
info_parent = NodePath("PanelContainer/MarginContainer/VBoxContainer/InfoContainer")
metadata/_custom_type_script = "uid://t7usxjx3kyoo"

[node name="PanelContainer" type="PanelContainer" parent="TargetInformer"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="TargetInformer/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 5
theme_override_constants/margin_bottom = 5

[node name="VBoxContainer" type="VBoxContainer" parent="TargetInformer/PanelContainer/MarginContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="TargetInformer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "--- Object Info ---"

[node name="InfoContainer" type="VBoxContainer" parent="TargetInformer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2

[editable path="World/GridPositioner2D"]
