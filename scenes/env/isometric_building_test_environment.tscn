[gd_scene load_steps=10 format=4 uid="uid://d3yeah2uexha2"]

[ext_resource type="Script" uid="uid://g7o2p3bycbnr" path="res://test/grid_building_test/scenes/env/building_test_environment.gd" id="1_rj0e4"]
[ext_resource type="Script" uid="uid://dil41nh8d4c3k" path="res://addons/grid_building/systems/injection/gb_injector_system.gd" id="2_1wet0"]
[ext_resource type="Resource" uid="uid://kxdod6rj5icx" path="res://test/grid_building_test/resources/composition_containers/test_iso_composition_container.tres" id="3_rj0e4"]
[ext_resource type="Script" uid="uid://dnl6gv8yc3how" path="res://addons/grid_building/systems/grid_targeting/grid_targeting_system.gd" id="4_tpvdk"]
[ext_resource type="Script" uid="uid://4mfr58yhmove" path="res://addons/grid_building/systems/building/building_system.gd" id="5_do6hl"]
[ext_resource type="Script" uid="uid://ckwhivepsvl0n" path="res://addons/grid_building/components/gb_level_context.gd" id="6_imq7x"]
[ext_resource type="TileSet" uid="uid://bixvhhvhke1c" path="res://test/grid_building_test/resources/tileset/test_isometric_level_tileset.tres" id="7_rj0e4"]
[ext_resource type="Script" uid="uid://dasmm18l8fxdo" path="res://addons/grid_building/user/gb_owner.gd" id="8_6bysi"]
[ext_resource type="PackedScene" uid="uid://bgm5fn16wwkrc" path="res://test/grid_building_test/scenes/positioning/test_positioner_stack_isometric.tscn" id="9_rj0e4"]

[node name="BuildingTestEnvironment" type="Node" node_paths=PackedStringArray("building_system", "gb_owner", "manipulation_parent", "indicator_manager", "injector", "grid_targeting_system", "positioner", "world", "level", "level_context", "tile_map_layer", "objects_parent", "placer")]
script = ExtResource("1_rj0e4")
building_system = NodePath("BuildingSystem")
gb_owner = NodePath("World/Level/Placer/GBOwner")
manipulation_parent = NodePath("World/TestPositionerStack/ManipulationParent")
indicator_manager = NodePath("World/TestPositionerStack/ManipulationParent/IndicatorManager")
injector = NodePath("GBInjectorSystem")
grid_targeting_system = NodePath("GridTargetingSystem")
positioner = NodePath("World/TestPositionerStack")
world = NodePath("World")
level = NodePath("World/Level")
level_context = NodePath("World/Level/GBLevelContext")
tile_map_layer = NodePath("World/Level/TileMapLayer")
objects_parent = NodePath("World/Level/PlacedObjectsParent")
placer = NodePath("World/Level/Placer")

[node name="GBInjectorSystem" type="Node" parent="." node_paths=PackedStringArray("injection_roots")]
script = ExtResource("2_1wet0")
composition_container = ExtResource("3_rj0e4")
injection_roots = [NodePath("..")]
metadata/_custom_type_script = "uid://dil41nh8d4c3k"

[node name="GridTargetingSystem" type="Node" parent="."]
script = ExtResource("4_tpvdk")
metadata/_custom_type_script = "uid://dnl6gv8yc3how"

[node name="BuildingSystem" type="Node" parent="."]
script = ExtResource("5_do6hl")
metadata/_custom_type_script = "uid://4mfr58yhmove"

[node name="World" type="Node2D" parent="."]

[node name="Level" type="Node2D" parent="World"]

[node name="GBLevelContext" type="Node" parent="World/Level" node_paths=PackedStringArray("target_map", "maps", "objects_parent")]
script = ExtResource("6_imq7x")
target_map = NodePath("../TileMapLayer")
maps = [NodePath("../TileMapLayer")]
objects_parent = NodePath("../PlacedObjectsParent")
metadata/_custom_type_script = "uid://ckwhivepsvl0n"

[node name="TileMapLayer" type="TileMapLayer" parent="World/Level"]
tile_map_data = PackedByteArray("AAD9//3/HAAAAAAAAAD9//7/HAAAAAAAAAD9////HAAAAAAAAAD+/wAAHAAAAAAAAAD+/wEAHAAAAAAAAAD+/wIAHAAAAAAAAAD+/wMAHAAAAAAAAAD+/wQAHAAAAAAAAAD+/wUAHAAAAAAAAAD+////HAAAAAAAAAD//wEAHAAAAAAAAAD//wIAHAAAAAAAAAD//wAAHAAAAAAAAAD/////HAAAAAAAAAD///7/HAAAAAAAAAD///3/HAAAAAAAAAAAAP3/HAAAAAAAAAAAAPz/HAAAAAAAAAABAP3/HAAAAAAAAAACAP7/HAAAAAAAAAACAP//HAAAAAAAAAABAP//HAAAAAAAAAABAAAAHAAAAAAAAAABAAEAHAAAAAAAAAAAAAEAHAAAAAAAAAAAAAIAHAAAAAAAAAAAAP7/HAAAAAAAAAABAP7/HAAAAAAAAAAAAAAAHAAAAAAAAAABAAIAHAAAAAAAAAABAAMAHAAAAAAAAAACAAMAHAAAAAAAAAACAAIAHAAAAAAAAAACAAEAHAAAAAAAAAACAAAAHAAAAAAAAAAAAP//HAAAAAAAAAAAAAMAHAAAAAAAAAAAAAQAHAAAAAAAAAD//wQAHAAAAAAAAAD//wUAHAAAAAAAAAD//wYAHAAAAAAAAAAAAAYAHAAAAAAAAAAAAAUAHAAAAAAAAAD//wMAHAAAAAAAAAD8//r/HAAAAAAAAAD8//v/HAAAAAAAAAD8//z/HAAAAAAAAAD8//3/HAAAAAAAAAD8//7/HAAAAAAAAAD8////HAAAAAAAAAD8/wAAHAAAAAAAAAD8/wEAHAAAAAAAAAD8/wIAHAAAAAAAAAD8/wMAHAAAAAAAAAD8/wQAHAAAAAAAAAD8/wUAHAAAAAAAAAD8/wYAHAAAAAAAAAD8/wcAHAAAAAAAAAD9//r/HAAAAAAAAAD9//v/HAAAAAAAAAD9//z/HAAAAAAAAAD9/wAAHAAAAAAAAAD9/wEAHAAAAAAAAAD9/wIAHAAAAAAAAAD9/wMAHAAAAAAAAAD9/wQAHAAAAAAAAAD9/wUAHAAAAAAAAAD9/wYAHAAAAAAAAAD9/wcAHAAAAAAAAAD+//r/HAAAAAAAAAD+//v/HAAAAAAAAAD+//z/HAAAAAAAAAD+//3/HAAAAAAAAAD+//7/HAAAAAAAAAD+/wYAHAAAAAAAAAD+/wcAHAAAAAAAAAD///r/HAAAAAAAAAD///v/HAAAAAAAAAD///z/HAAAAAAAAAD//wcAHAAAAAAAAAAAAPr/HAAAAAAAAAAAAPv/HAAAAAAAAAAAAAcAHAAAAAAAAAABAPr/HAAAAAAAAAABAPv/HAAAAAAAAAABAPz/HAAAAAAAAAABAAQAHAAAAAAAAAABAAUAHAAAAAAAAAABAAYAHAAAAAAAAAABAAcAHAAAAAAAAAACAPr/HAAAAAAAAAACAPv/HAAAAAAAAAACAPz/HAAAAAAAAAACAP3/HAAAAAAAAAACAAQAHAAAAAAAAAACAAUAHAAAAAAAAAACAAYAHAAAAAAAAAACAAcAHAAAAAAAAAADAPr/HAAAAAAAAAADAPv/HAAAAAAAAAADAPz/HAAAAAAAAAADAP3/HAAAAAAAAAADAP7/HAAAAAAAAAADAP//HAAAAAAAAAADAAAAHAAAAAAAAAADAAEAHAAAAAAAAAADAAIAHAAAAAAAAAADAAMAHAAAAAAAAAADAAQAHAAAAAAAAAADAAUAHAAAAAAAAAADAAYAHAAAAAAAAAADAAcAHAAAAAAAAAD5//r/HAAAAAAAAAD5//v/HAAAAAAAAAD5//z/HAAAAAAAAAD5//3/HAAAAAAAAAD5//7/HAAAAAAAAAD5////HAAAAAAAAAD5/wAAHAAAAAAAAAD5/wEAHAAAAAAAAAD5/wIAHAAAAAAAAAD5/wMAHAAAAAAAAAD5/wQAHAAAAAAAAAD5/wUAHAAAAAAAAAD5/wYAHAAAAAAAAAD5/wcAHAAAAAAAAAD6//r/HAAAAAAAAAD6//v/HAAAAAAAAAD6//z/HAAAAAAAAAD6//3/HAAAAAAAAAD6//7/HAAAAAAAAAD6////HAAAAAAAAAD6/wAAHAAAAAAAAAD6/wEAHAAAAAAAAAD6/wIAHAAAAAAAAAD6/wMAHAAAAAAAAAD6/wQAHAAAAAAAAAD6/wUAHAAAAAAAAAD6/wYAHAAAAAAAAAD6/wcAHAAAAAAAAAD7//r/HAAAAAAAAAD7//v/HAAAAAAAAAD7//z/HAAAAAAAAAD7//3/HAAAAAAAAAD7//7/HAAAAAAAAAD7////HAAAAAAAAAD7/wAAHAAAAAAAAAD7/wEAHAAAAAAAAAD7/wIAHAAAAAAAAAD7/wMAHAAAAAAAAAD7/wQAHAAAAAAAAAD7/wUAHAAAAAAAAAD7/wYAHAAAAAAAAAD7/wcAHAAAAAAAAAAEAPr/HAAAAAAAAAAEAPv/HAAAAAAAAAAEAPz/HAAAAAAAAAAEAP3/HAAAAAAAAAAEAP7/HAAAAAAAAAAEAP//HAAAAAAAAAAEAAAAHAAAAAAAAAAEAAEAHAAAAAAAAAAEAAIAHAAAAAAAAAAEAAMAHAAAAAAAAAAEAAQAHAAAAAAAAAAEAAUAHAAAAAAAAAAEAAYAHAAAAAAAAAAEAAcAHAAAAAAAAAAFAPr/HAAAAAAAAAAFAPv/HAAAAAAAAAAFAPz/HAAAAAAAAAAFAP3/HAAAAAAAAAAFAP7/HAAAAAAAAAAFAP//HAAAAAAAAAAFAAAAHAAAAAAAAAAFAAEAHAAAAAAAAAAFAAIAHAAAAAAAAAAFAAMAHAAAAAAAAAAFAAQAHAAAAAAAAAAFAAUAHAAAAAAAAAAFAAYAHAAAAAAAAAAFAAcAHAAAAAAAAAAGAPr/HAAAAAAAAAAGAPv/HAAAAAAAAAAGAPz/HAAAAAAAAAAGAP3/HAAAAAAAAAAGAP7/HAAAAAAAAAAGAP//HAAAAAAAAAAGAAAAHAAAAAAAAAAGAAEAHAAAAAAAAAAGAAIAHAAAAAAAAAAGAAMAHAAAAAAAAAAGAAQAHAAAAAAAAAAGAAUAHAAAAAAAAAAGAAYAHAAAAAAAAAAGAAcAHAAAAAAAAAA=")
tile_set = ExtResource("7_rj0e4")

[node name="PlacedObjectsParent" type="Node2D" parent="World/Level"]

[node name="Placer" type="Node2D" parent="World/Level"]

[node name="GBOwner" type="Node" parent="World/Level/Placer" node_paths=PackedStringArray("owner_root")]
script = ExtResource("8_6bysi")
owner_root = NodePath("..")
metadata/_custom_type_script = "uid://dasmm18l8fxdo"

[node name="TestPositionerStack" parent="World" instance=ExtResource("9_rj0e4")]

[editable path="World/TestPositionerStack"]
