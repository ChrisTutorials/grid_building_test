[gd_scene load_steps=16 format=3 uid="uid://di15brful4nfb"]

[ext_resource type="Script" path="res://godot/test/grid_building_test/environments/all_systems_test_environment.gd" id="1_script"]
[ext_resource type="Script" uid="uid://dil41nh8d4c3k" path="res://addons/grid_building/systems/injection/gb_injector_system.gd" id="2_injector"]
[ext_resource type="Script" uid="uid://5q03tg" path="res://addons/grid_building/systems/grid_targeting/grid_targeting_system.gd" id="3_targeting"]
[ext_resource type="Script" uid="uid://9_q7crs" path="res://addons/grid_building/systems/building/building_system.gd" id="4_building"]
[ext_resource type="Script" uid="uid://denqpiufkek1l" path="res://demos/shared/world/world.gd" id="5_world"]
[ext_resource type="Script" uid="uid://25_5jnje" path="res://templates/grid_building_templates/grid_positioner/grid_positioner_2d.gd" id="6_positioner"]
[ext_resource type="Script" path="res://godot/test/grid_building_test/components/gb_test_level_context.gd" id="7_level_context"]
[ext_resource type="Resource" uid="uid://dy6e5p5d6ax6n" path="res://godot/test/helpers/test_composition_container.tres" id="8_container"]
[ext_resource type="Script" uid="uid://dil41nh8d4c3k" path="res://addons/grid_building/systems/building/components/drag_manager.gd" id="9_drag"]
[ext_resource type="PackedScene" uid="uid://cfgpjxd1n8vk8" path="res://demos/shared/systems/demo_target_highlighter.tscn" id="10_highlighter"]
[ext_resource type="PackedScene" uid="uid://ccb1l0jttdmup" path="res://demos/shared/systems/demo_manipulation_system.tscn" id="11_manipulation"]
[ext_resource type="Script" uid="uid://c76d5u5d2o1vc" path="res://addons/grid_building/systems/collision/collision_mapper.gd" id="12_collision_mapper"]
[ext_resource type="Script" uid="uid://dqvrvvf8fq7xr" path="res://addons/grid_building/placement/manager/indicator_manager.gd" id="13_indicator_manager"]

[node name="AllSystemsTestEnvironment" type="Node2D"]
script = ExtResource("1_script")

[node name="Systems" type="Node" parent="." node_paths=PackedStringArray("injection_roots")]
script = ExtResource("2_injector")
composition_container = ExtResource("8_container")
injection_roots = [NodePath("..")]

[node name="GBInjectorSystem" type="Node" parent="Systems"]
script = ExtResource("2_injector")
composition_container = ExtResource("8_container")

[node name="BuildingSystem" type="Node" parent="Systems"]
script = ExtResource("4_building")

[node name="DragManager" type="Node" parent="Systems/BuildingSystem"]
script = ExtResource("9_drag")

[node name="GridTargetingSystem" type="Node" parent="Systems"]
script = ExtResource("3_targeting")

[node name="CollisionMapper" type="Node" parent="Systems"]
script = ExtResource("12_collision_mapper")

[node name="IndicatorManager" type="Node" parent="Systems"]
script = ExtResource("13_indicator_manager")

[node name="ManipulationSystem" parent="Systems" instance=ExtResource("11_manipulation")]

[node name="TargetHighlighter" parent="Systems/ManipulationSystem" instance=ExtResource("10_highlighter")]

[node name="World" type="Node2D" parent="."]
script = ExtResource("5_world")

[node name="GridPositioner" type="Node2D" parent="World"]
script = ExtResource("6_positioner")

[node name="TileMapLayer" type="TileMapLayer" parent="World"]

[node name="Level" type="Node2D" parent="World"]

[node name="LevelContext" type="Node" parent="World/Level"]
script = ExtResource("7_level_context")

[node name="Objects" type="Node2D" parent="World/Level"]

[node name="GBCompositionContainer" type="Node" parent="."]

[node name="StaticBody2D" type="StaticBody2D" parent="."]
collision_layer = 2048
collision_mask = 0

[node name="CharacterBody2D" type="CharacterBody2D" parent="."]
collision_layer = 2048
collision_mask = 0

[node name="Area2D" type="Area2D" parent="."]
collision_layer = 2048
collision_mask = 0

